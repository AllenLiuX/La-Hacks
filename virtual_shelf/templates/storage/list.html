<!-- extends表明此页面继承自 base.html 文件 -->
{% extends "base.html" %}
{% load staticfiles %}

<!-- 写入 base.html 中定义的 title -->
{% block title %}
    Store List
{% endblock title %}

<!-- 写入 base.html 中定义的 content -->
{% block content %}
<style>
    body{
    background-image: url("/static/images/list4.jpg");
    background-position: center 0;
    background-repeat: no-repeat;
    background-attachment: fixed;
    background-size: cover;
    -webkit-background-size: cover;
    -o-background-size: cover;
    -moz-background-size: cover;
    -ms-background-size: cover;
    }
</style>

<!-- 定义放置文章标题的div容器 -->
<div class="container">
    <!-- 地图 -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAtSTvHFS3VAXxI9OrIJBsEGHAswBl-A88"></script>
    <div id="googleMap" style="position: absolute; top: 77px; right: 65px; box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2); height:800px; width: 900px"></div>
    <script type="text/javascript">
        var map = new google.maps.Map(document.getElementById("googleMap"),{
            center : new google.maps.LatLng(34.068921,-118.4473698),
            zoom : 15,
            mapTypeId : google.maps.MapTypeId.ROADMAP
        });
        var infoWindow = new google.maps.InfoWindow;
        
        //use current location
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
            var pos = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
            };
            map.setCenter(pos);
          }, function() {
            handleLocationError(true, infoWindow, map.getCenter());
          });
        } else {
          // Browser doesn't support Geolocation
          handleLocationError(false, infoWindow, map.getCenter());
        }

        //这个要钱 先备注 用的时候取消备注就可以
        //var geocoder = new google.maps.Geocoder();

        function geocodeAddress(geocoder, address, resultsMap) {
            geocoder.geocode({'address': address}, function (results, status) {
                if (status === 'OK') {
                    resultsMap.setCenter(results[0].geometry.location);
                    var marker = new google.maps.Marker({
                        map: resultsMap,
                        position: results[0].geometry.location
                    });
                } else {
                    alert('Geocode was not successful for the following reason: ' + status);
                }
            });
        }
        //这个是test，然后就把所有超市address存在一个array里，pass给第二个参数就可以
        geocodeAddress(geocoder, 'ralphs westwood', map);
    </script>
    
    {% for k, v in data.items %}
    <div class="row mt-2">

        <!-- 文章内容 -->
        <div class="col-4 mb-4">
        <!-- 卡片容器 -->
            <div class="card h-100" style="opacity: 0.7; box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);">
                <!-- 标题 -->
                <h5 class="card-header">{{ k }}</h5>
                <!-- 摘要 -->
                {% for ownership in v %}
                <div>
                    <p class="card-text">Item: {{ ownership.item|slice:'100' }}</p>
                </div>
                <div>
                    <p class="card-text">Price: {{ ownership.price|slice:'100' }}</p>
                </div>
                <div>
                    <p class="card-text">Quantity: {{ ownership.quantity|slice:'100' }}</p>
                </div>
                {% endfor %}
                <!-- 注脚 -->
            </div>
        </div>

    </div>
    {% endfor %}
</div>
{% endblock content %}
